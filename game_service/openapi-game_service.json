{"openapi":"3.1.0","info":{"title":"Tri-Duel Game Service","description":"\n    üéÆ **Tri-Duel Game Service** - Match logic and card game engine\n    \n    ## Features\n    * üÉè Create and manage matches\n    * üéØ Submit moves and resolve rounds\n    * ü™®üìÑ‚úÇÔ∏è Rock-Paper-Scissors card mechanics\n    * üé® Beautiful ASCII art card display\n    \n    ## Card Display\n    Use `/cards` endpoints to view all available cards with ASCII art visualization.\n    No authentication required for viewing cards!\n    \n    ## Authentication\n    Protected endpoints require JWT Bearer token from Auth Service.\n    ","version":"1.0.0"},"paths":{"/matches":{"post":{"tags":["game"],"summary":"Create Match","description":"Create a new match between two players.","operationId":"create_match_matches_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMatchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/matches/{match_id}/move":{"post":{"tags":["game"],"summary":"Submit Move","description":"Submit a card move in an active match.","operationId":"submit_move_matches__match_id__move_post","parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","title":"Match Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/MoveResultSchema"},{"$ref":"#/components/schemas/WaitingForOpponentSchema"}],"title":"Response Submit Move Matches  Match Id  Move Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/matches/{match_id}":{"get":{"tags":["game"],"summary":"Get Match State","description":"Get complete match state for a player.","operationId":"get_match_state_matches__match_id__get","parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","title":"Match Id"}},{"name":"player_id","in":"query","required":true,"schema":{"type":"string","title":"Player Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MatchStateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards/{card_id}":{"get":{"tags":["game"],"summary":"Get Card Detail Svg","description":"Get card detail view as SVG (VIEW 2: Card Detail).\n\nShows single card with all details:\n- Category (Rock/Paper/Scissors)\n- Power level with visual bar\n- Rarity (Common/Rare/Legendary)\n- Card ID\n\nPUBLIC - no authentication required.\n\nUsage:\n    - Browser: http://localhost:8003/cards/1\n    - HTML: <img src=\"http://localhost:8003/cards/1\" alt=\"Card 1\"/>\n    - Postman: Direct visualization","operationId":"get_card_detail_svg_cards__card_id__get","parameters":[{"name":"card_id","in":"path","required":true,"schema":{"type":"integer","title":"Card Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cards":{"get":{"tags":["game"],"summary":"Get Deck Gallery","description":"Get complete deck gallery as SVG (VIEW 1: Deck Gallery).\n\nShows all available cards in a grid layout with thumbnails.\nPerfect for browsing all cards in the game.\n\nPUBLIC - no authentication required.\n\nUsage:\n    - Browser: http://localhost:8003/cards\n    - Displays all cards in organized grid (5 per row)\n    - Shows statistics (Rock/Paper/Scissors count)\n    - All cards with power levels and rarity borders","operationId":"get_deck_gallery_cards_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/matches/{match_id}/hand":{"get":{"tags":["game"],"summary":"Get Player Hand Visual","description":"Get player's hand visualization as SVG (VIEW 3: Player Hand).\n\nShows player's cards in a match with visual distinction:\n- Available cards (can be played) - shown in color\n- Used cards (already played) - shown in grayscale with red X\n\nAUTHENTICATED - player can only view their own hand.\n\nArgs:\n    match_id: Match identifier\n    player_id: Player identifier (must match authenticated user)\n\nReturns:\n    SVG visualization of player's hand\n\nUsage:\n    - Browser: http://localhost:8003/matches/{match_id}/hand?player_id={player_id}\n    - Shows available and used cards separately\n    - Used cards are grayed out and marked","operationId":"get_player_hand_visual_matches__match_id__hand_get","parameters":[{"name":"match_id","in":"path","required":true,"schema":{"type":"string","title":"Match Id"}},{"name":"player_id","in":"query","required":true,"schema":{"type":"string","title":"Player Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Health Check","operationId":"health_check__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"CardSchema":{"properties":{"id":{"type":"integer","minimum":1.0,"title":"Id","description":"Card definition ID"},"category":{"type":"string","pattern":"^(rock|paper|scissors)$","title":"Category","description":"Card category (RPS)","examples":["rock","paper","scissors"]},"power":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Power","description":"Card power level","examples":[1,3,6]}},"type":"object","required":["id","category","power"],"title":"CardSchema"},"CreateMatchRequest":{"properties":{"player1_id":{"type":"string","maxLength":100,"minLength":1,"pattern":"^[a-zA-Z0-9_-]+$","title":"Player1 Id","description":"Username (alphanumeric, underscore, hyphen)","examples":["alice","player_123","bob-2024"]},"player2_id":{"type":"string","maxLength":100,"minLength":1,"pattern":"^[a-zA-Z0-9_-]+$","title":"Player2 Id","description":"Opponent username","examples":["bob","player_456"]}},"type":"object","required":["player1_id","player2_id"],"title":"CreateMatchRequest"},"CreateMatchResponse":{"properties":{"match_id":{"type":"string","title":"Match Id"},"player_id":{"type":"string","title":"Player Id"},"hand":{"items":{"$ref":"#/components/schemas/HandCardSchema"},"type":"array","title":"Hand"},"status":{"type":"string","title":"Status"}},"type":"object","required":["match_id","player_id","hand","status"],"title":"CreateMatchResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HandCardSchema":{"properties":{"match_card_id":{"type":"integer","minimum":1.0,"title":"Match Card Id","description":"Match card instance ID"},"card":{"$ref":"#/components/schemas/CardSchema"}},"type":"object","required":["match_card_id","card"],"title":"HandCardSchema"},"MatchStateResponse":{"properties":{"match_id":{"type":"string","title":"Match Id"},"status":{"type":"string","title":"Status"},"current_round":{"type":"integer","title":"Current Round"},"points_p1":{"type":"integer","title":"Points P1"},"points_p2":{"type":"integer","title":"Points P2"},"player_hand":{"items":{"$ref":"#/components/schemas/HandCardSchema"},"type":"array","title":"Player Hand"},"used_cards":{"items":{"$ref":"#/components/schemas/PlayedCardSchema"},"type":"array","title":"Used Cards"},"opponent_used_cards":{"items":{"$ref":"#/components/schemas/PlayedCardSchema"},"type":"array","title":"Opponent Used Cards"},"match_winner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Match Winner"}},"type":"object","required":["match_id","status","current_round","points_p1","points_p2","player_hand","used_cards","opponent_used_cards","match_winner"],"title":"MatchStateResponse"},"MoveRequest":{"properties":{"match_card_id":{"type":"integer","maximum":100000.0,"minimum":1.0,"title":"Match Card Id","description":"ID of card to play from hand","examples":[1,42,99]},"player_id":{"type":"string","maxLength":100,"minLength":1,"pattern":"^[a-zA-Z0-9_-]+$","title":"Player Id","description":"Player making the move","examples":["alice","bob"]}},"type":"object","required":["match_card_id","player_id"],"title":"MoveRequest"},"MoveResultSchema":{"properties":{"round":{"type":"integer","title":"Round"},"winner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Winner"},"reason":{"type":"string","title":"Reason"},"points_p1":{"type":"integer","title":"Points P1"},"points_p2":{"type":"integer","title":"Points P2"},"match_finished":{"type":"boolean","title":"Match Finished"},"match_winner":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Match Winner"}},"type":"object","required":["round","winner","reason","points_p1","points_p2","match_finished","match_winner"],"title":"MoveResultSchema"},"PlayedCardSchema":{"properties":{"card":{"$ref":"#/components/schemas/CardSchema"},"round_used":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Round Used","description":"Round number when card was played (1-5)"}},"type":"object","required":["card","round_used"],"title":"PlayedCardSchema"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WaitingForOpponentSchema":{"properties":{"status":{"type":"string","title":"Status","default":"waiting_for_opponent"}},"type":"object","title":"WaitingForOpponentSchema"}}}}